---
date: '2023-12-07T21:18:09+01:00'
draft: true
title: 'Platform Engineering Through the Lens of Two-Sided Markets'
author: 'Nagy Viktor'
---

_Disclaimer: The author is employed by GitLab. The article has benefited from constructive feedback from the CNCF community, with special thanks to Abby Bangser, Lou Bichard, and Colin Griffin for their valuable insights._

## TL;DR

Unveiling the parallels between the challenges of Internal Developer Platforms and the dynamics of two-sided markets, this article explores the strategic decision-making process when applying the CNCF Platform Engineering Maturity Model. The key takeaway emphasizes the criticality of solving the right problems first, triggering a self-sustaining value loop as the platform matures. Additionally, the article sheds light on the challenges associated with switching between platforms and underscores the importance of aligning functionality expectations with market dynamics.

## The theory of platforms

In economics platforms are modelled as [two or multi-sided markets](https://en.wikipedia.org/wiki/Two-sided_market). Basic economics speaks about markets as the interaction of suppliers and consumers. A two-sided market might still have suppliers and consumers, but the market itself is a product with its own market. A few well-known two-sided market products are operating systems or social networks. There is a market for operating systems that consumers choose. At the same time there is a market for operating systems that application developers choose. The more applications are available for a given operating system, the more users want to choose it; and the more users use an operating system, the more applications are developed for it. Interestingly, this aspect of two-sided products brings interesting market dynamics with it.

While physical markets might have similar characteristics, because of the nature of the physical world (travel is costly) the two-sided market considerations are often negligible. On the other hand, for digital goods a two-sided market suffers for several properties that need regulatory intervention.

To summarise the economics: In two or multi-sided markets, the products are platforms with users and suppliers who evaluate the platform: the more or higher quality users make a platform more compelling to enter for the suppliers; the more or higher quality suppliers make the platform more compelling to enter for the users.

For the rest of the article, I’ll speak about multi-sided markets as they better capture the world of DevOps platforms, and the economics in our case is very similar to two-sided markets.

## Application to platform engineering

DevOps platforms or Internal Developer Platforms (IDP) operated by platform engineering teams have many characteristics of multi-sided markets. For a software developer there is no reason to join an IDP if it does not improve the developer experience beating the experienced cost of switching. Similarly, for different [platform teams](https://teamtopologies.com/key-concepts) in the company there is no reason to invest into an IDP without having developers using it. This shows one important aspect of multi-sided markets. Adoption looks like a chicken and egg problem. Before discussing adoption in detail, let’s speak a bit about the many sides of a DevOps platform.

I called these platforms many sided. The [CNCF Platform White Paper](https://tag-app-delivery.cncf.io/whitepapers/platforms/#why-platforms) describes the motivations why enterprises might invest into platforms:

“The desire to refocus delivery teams on their core focus and reduce duplication of effort across the organisation has motivated enterprises to implement platforms for cloud-native computing. By investing in platforms, enterprises can:

1. Reduce the cognitive load on product teams and thereby accelerate product development and delivery
2. Improve reliability and resiliency of products relying on platform capabilities by dedicating experts to configure and manage them
3. Accelerate product development and delivery by reusing and sharing platform tools and knowledge across many teams in an enterprise
4. Reduce risk of security, regulatory and functional issues in products and services by governing platform capabilities and the users, tools and processes surrounding them
5. Enable cost-effective and productive use of services from public clouds and other managed offerings by enabling delegation of implementations to those providers while maintaining control over user experience”

By analysing this list, we can see the interest of different actors within the enterprise. Reducing the cognitive load of product teams is the direct interest of the members of the product team and the indirect interest of the company as it can accelerate product development. Improving reliability and resilience is the interest of infrastructure teams. Reducing security risks and increasing compliance is the interest of security teams. While cost considerations are a financial topic and depending on the company culture might live with the higher management only. These are the different sides of the market. A successful platform needs to balance the needs of all the sides and orchestrate adoption across all of them.

## Adopting a platform

As already noted, a central question of multi-sided markets is their adoption. The more users are on a platform, the more investment goes into a platform. The more features a platform offers, the more users want to use a platform. But how does one start this cycle? Where is the turning point that will start a self enforcing spiral of adoption?

Platforms require some level of initial coordination. This coordination might come through investment into platform features or internal regulation. The [CNCF Platform Engineering Maturity model](https://tag-app-delivery.cncf.io/whitepapers/platform-eng-maturity-model/) discusses five aspects of maturity: Investment, Adoption, Interfaces, Operations and Measurement. While looking at these five aspects independently is correct from a platform development and maturity assessment perspective, they are interdependent especially early in the lifecycle of a platform.

When a company wants to introduce a platform, I recommend looking at the adoption and investment aspects together. In my experience, upfront investment and strong company-wide dedication (executive support) has enabled much faster and more successful introduction of a platform.

There are a few ways in which one might decrease the cost of adoption though. As mentioned earlier, the more features a platform offers the more compelling it is to its potential users to onboard. There are a few solutions on the market that can drastically either offer a large part of platform capabilities out of the box or reduce the cost of building a custom platform. Two such solutions are [Auto DevOps from GitLab](https://docs.gitlab.com/ee/topics/autodevops/) or [Backstage from Spotify](https://backstage.io/) (now a CNCF project). The linked solutions show the differences in approach. Auto DevOps offers an opinionated off-the-shelf DevSecOps toolchain, a nearly complete platform offering, thus making it compelling for software developers to join. Compare this with Backstage that enables the creation of a custom platform tailored to the tools already used in the company through easily integrating community or bespoke internal plugins. While Auto DevOps might work out of the box and customising it requires a good understanding of its internal working, Backstage requires investment by design, but provides greater flexibility. The differences between these two approaches generalise to a strategy decision that should be at the core of initial platform engineering investment decisions: Build or Buy.

## Build a lot or Buy and build a little

Every market has a natural evolution from hacked solutions to custom tooling, and from professionally supported products to commodities. For example, in 2005 git started as a custom tool to support collaboration on the Linux kernel. As git turned 18 years old, it’s undeniably the version control system of our time. Where there are some companies who still earn money from migrating huge codebases of slow-moving enterprises to git, for the majority of the IT world git is an accepted commodity.

Similarly to git, platform engineering is evolving from a collection of bash scripts to well-structured products and sometime in the future to commodities. We live in an era where platforms are moving from custom tools to professionally supported products, and these tools are built on solutions that are either products or commodities today. For example, every platform needs a workflow engine like [GitHub Actions](https://github.com/features/actions) or [GitLab pipelines](https://docs.gitlab.com/ee/ci/pipelines/). While automation engines were the product a few years ago, these engines are currently evolving from products to commodities. Similarly, every platform needs a deployment tool, that is - even for the most current platforms like [Kubernetes](https://kubernetes.io/) - a combination of other tools like [Helm](https://helm.sh/), [Kustomize](https://kubectl.docs.kubernetes.io/installation/kustomize/) and a [GitOps](https://opengitops.dev/) tool, like [Flux](https://fluxcd.io/) or [Argo](https://argo-cd.readthedocs.io/en/stable/).

By product I mean external, off-the-shelf products, not internal ones. There might still be an internal platform engineering team, there might still be internal developments necessary, but the core entrypoint for the platform is provided by a single external product like Backstage or GitLab. Given the evolution of the market, companies need to decide how much they want to build vs buy. Ten years ago the question had an obvious answer as there were no off-the-shelf platform products available on the market. The market evolved from custom tooling to professionally supported products when vendors like GitLab helped define the DevSecOps platform market category and Backstage popularised the plugin based internal developer portals. No matter which direction you take you will buy into one of the platform stacks and more importantly, you will make a strategic bet on how mature the market is: how much custom tooling and integration you want to keep versus signing up for the feature-set and experience of an off-the-shelf solution.

I’d like to emphasise here that this is a strategic bet. All the elements of your platform stack are constantly moving from custom tooling to become products and finally commodities. The strategic question is how quick you expect this movement to be in the next 3-7 years. If you expect that the market is still relatively far away from offering a near-complete stack as a common off the shelf application, then you are likely better served by integrating your current tools in an umbrella application like Backstage. On the other hand, if you think that the market can provide 80% of your tooling in an integrated fashion that only requires provided configuration of an installed application and allows to build out and customise for missing functionalities, then you should look for the best product that can serve you from the market. While both approaches have a buy element, the former has a much stronger build aspect than the latter approach.

No matter your decision, the market will evolve towards better products and less (or simpler) custom built integrations. You will still have to start somewhere, the next section provides some ideas to help you to scope your initial platform.

## Scoping an initial platform

From a product perspective, the primary goal with an IDP is to get engineers onboard and kick-in the value loop of a multi-sided market. For this, the recommended initial scope should ease the biggest pains developers have. Today, running unit tests, building containers, even managing the related CI jobs should be in the toolbelt for all seasoned developers. There is no reason to build a platform around these capabilities.

The pain points start either with cross team collaboration, or complex solutions, so a platform should focus on some of the underlying processes and tools. Neither collaboration, nor complexity is avoidable in an enterprise, thus both lend themselves for an integrated platform experience. Cross-team collaboration is often required with security and infrastructure, sometimes even with release management. While complex solutions, like Kubernetes, lend themselves for higher-level abstractions that are easier to work with for every development team. An approach I have seen work out well for many companies is to first settle on a delivery platform (roughly equivalent to higher-level abstractions for Kubernetes) and then automate project creation that includes onboarding the project into the delivery platform.

After many interviews with GitLab users and customers, I found that focusing on building a delivery platform first and adding it to a project lifecycle tool second leads to successful platform adoption.

Following the briefly described pattern, a possible approach would be the following.

The delivery platform should include all the steps from building a production-ready container to releasing it to the users. There are likely several non-production environments where the container goes through various scans and checks. There might be approval processes and even deployment windows before the new version could reach production. The production deployment might require long-running processes, like database migrations, that can take days and multiple orchestrated steps to get the infrastructure ready for a new version of the application. Once the application gets deployed, there might be various release strategies to bring it in front of its users. Throughout this process there are likely notifications floating around Slack and issue trackers, metrics being gathered to check the health of the new deployment and the overall system. All these processes should be simplified down to a minimal configuration file for the software developer. This is the job of an application delivery platform.

Once the company has a stable and heavily used delivery platform, it’s time to build an automation that allows every new project to automatically be enrolled into the system, together with all the surrounding tooling. While the first step expects the development team to start using the delivery platform once they are ready to deploy their application, the second phase expects developers to use the platform when they start (or even just plan) a new project. Starting a new project can ship a ready to deploy hello world application to the developer in their programming language of choice with all the necessary supporting infrastructure registrations, like new Grafana dashboard, etc being created.

## The small print

There is one aspect of multi-sided markets that I did not mention yet: the cost of leaving a platform. As we have seen with Facebook or Helm, even the worst solutions become sticky and very hard to leave once they grow as a platform. If all the apps are packaged with Helm, then everyone needs to use Helm despite it being [a very poor solution for packaging open source applications](https://github.com/kubernetes/design-proposals-archive/blob/main/architecture/declarative-application-management.md#parameterization-pitfalls) for deployment. Even building a superior solution that can ingest Helm and enhance it might not help to overcome Helm as package creators could get the users of direct and indirect users as well by staying with Helm instead of packaging for the superior solution only. As market regulations of well-known multi-sided markets show, leaving a platform requires a large amount of dedication and often central coordination (e.g. the Facebook and Google lawsuits fall under this domain).

As companies will still own their platform, migration might be incremental, but you should expect a long-term investment. Investing into a platform is a more strategic decision than picking the programming language of a monolith. You can later break up the monolith into microservices and rewrite some of the microservices in a different language. We don’t know of an even similarly costly way to leave a platform and start a new one.

## Summary

Two and multi-sided markets are an often studied theory in economics and the theory can be applied to internal developer platforms. Economic theory suggests that two sided markets have two tough areas: adoption and switching costs. As a result, with respect to adoption, executive sponsorship and dedicated investment into the platform can boost the success of the platform. Based on dozens of interviews focusing first on application delivery and second on project scaffolding often led to successful platforms. The decision of how much of the platform should be brought in from the market versus built internally should be a high-level strategic decision based on the perceived maturity of the market.
